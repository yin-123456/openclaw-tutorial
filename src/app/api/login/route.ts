import { cookies } from 'next/headers'
import { NextResponse } from 'next/server'

// 用户数据库
const users: Record<string, string> = {
  'user001': 'Kx7mP2nQ',
  'user002': 'Rj4wL9vB',
  'user003': 'Hy6tN3cF',
  'user004': 'Wm8sK5dG',
  'user005': 'Qp2xJ7hV',
  'user006': 'Tn9bM4rL',
  'user007': 'Vc3fS6wY',
  'user008': 'Bk5gD8zX',
  'user009': 'Lm7hF2pC',
  'user010': 'Nw4jR9tK',
  'user011': 'Px6kT3vM',
  'user012': 'Sy8lW5bN',
  'user013': 'Dz2mY7cQ',
  'user014': 'Fa4nH9dR',
  'user015': 'Gc6pJ2fS',
  'user016': 'Hd8qK4gT',
  'user017': 'Je3rL6hV',
  'user018': 'Kf5sM8jW',
  'user019': 'Lg7tN2kX',
  'user020': 'Mh9vP4lY',
  'user021': 'Nj2wQ6mZ',
  'user022': 'Pk4xR8nA',
  'user023': 'Ql6yS3pB',
  'user024': 'Rm8zT5qC',
  'user025': 'Sn3aV7rD',
  'user026': 'Tp5bW9sE',
  'user027': 'Vq7cX2tF',
  'user028': 'Wr9dY4vG',
  'user029': 'Xs2eZ6wH',
  'user030': 'Yt4fA8xJ',
  'user031': 'Zv6gB3yK',
  'user032': 'Aw8hC5zL',
  'user033': 'Bx3jD7aM',
  'user034': 'Cy5kE9bN',
  'user035': 'Dz7lF2cP',
  'user036': 'Ea9mG4dQ',
  'user037': 'Fb2nH6eR',
  'user038': 'Gc4pJ8fS',
  'user039': 'Hd6qK3gT',
  'user040': 'Je8rL5hV',
  'user041': 'Kf3sM7jW',
  'user042': 'Lg5tN9kX',
  'user043': 'Mh7vP2lY',
  'user044': 'Nj9wQ4mZ',
  'user045': 'Pk2xR6nA',
  'user046': 'Ql4yS8pB',
  'user047': 'Rm6zT3qC',
  'user048': 'Sn8aV5rD',
  'user049': 'Tp3bW7sE',
  'user050': 'Vq5cX9tF',
  'user051': 'Wr7dY2vG',
  'user052': 'Xs9eZ4wH',
  'user053': 'Yt2fA6xJ',
  'user054': 'Zv4gB8yK',
  'user055': 'Aw6hC3zL',
  'user056': 'Bx8jD5aM',
  'user057': 'Cy3kE7bN',
  'user058': 'Dz5lF9cP',
  'user059': 'Ea7mG2dQ',
  'user060': 'Fb9nH4eR',
  'user061': 'Gc2pJ6fS',
  'user062': 'Hd4qK8gT',
  'user063': 'Je6rL3hV',
  'user064': 'Kf8sM5jW',
  'user065': 'Lg3tN7kX',
  'user066': 'Mh5vP9lY',
  'user067': 'Nj7wQ2mZ',
  'user068': 'Pk9xR4nA',
  'user069': 'Ql2yS6pB',
  'user070': 'Rm4zT8qC',
  'user071': 'Sn6aV3rD',
  'user072': 'Tp8bW5sE',
  'user073': 'Vq3cX7tF',
  'user074': 'Wr5dY9vG',
  'user075': 'Xs7eZ2wH',
  'user076': 'Yt9fA4xJ',
  'user077': 'Zv2gB6yK',
  'user078': 'Aw4hC8zL',
  'user079': 'Bx6jD3aM',
  'user080': 'Cy8kE5bN',
  'user081': 'Dz3lF7cP',
  'user082': 'Ea5mG9dQ',
  'user083': 'Fb7nH2eR',
  'user084': 'Gc9pJ4fS',
  'user085': 'Hd2qK6gT',
  'user086': 'Je4rL8hV',
  'user087': 'Kf6sM3jW',
  'user088': 'Lg8tN5kX',
  'user089': 'Mh3vP7lY',
  'user090': 'Nj5wQ9mZ',
  'user091': 'Pk7xR2nA',
  'user092': 'Ql9yS4pB',
  'user093': 'Rm2zT6qC',
  'user094': 'Sn4aV8rD',
  'user095': 'Tp6bW3sE',
  'user096': 'Vq8cX5tF',
  'user097': 'Wr3dY7vG',
  'user098': 'Xs5eZ9wH',
  'user099': 'Yt7fA2xJ',
  'user100': 'Zv9gB4yK',
}

export async function POST(req: Request) {
  const { username, password } = await req.json()
  
  if (users[username] === password) {
    const cookieStore = await cookies()
    cookieStore.set('auth', username, { 
      httpOnly: true, 
      maxAge: 60 * 60 * 24 * 7
    })
    return NextResponse.json({ success: true })
  }
  
  return NextResponse.json({ error: '账号或密码错误' }, { status: 401 })
}
